apiVersion: v1
kind: Pod
metadata:
  name: services-pod
  labels:
    app: services-pod
  annotations:
    description: "Este pod contem os serviços utilizados pela aplicação DB e N8N (Mock flow payment order)"
spec:
  containers:
    - name: n8n
      image: docker.n8n.io/n8nio/n8n
      ports:
        - containerPort: 5678
          protocol: TCP
      env:
        - name: N8N_PORT
          valueFrom:
            secretKeyRef:
              name: secrets-app
              key: N8N_PORT
        - name: N8N_PROTOCOL
          valueFrom:
            secretKeyRef:
              name: secrets-app
              key: N8N_PROTOCOL
        - name: NODE_ENV
          valueFrom:
            secretKeyRef:
              name: secrets-app
              key: NODE_ENV
        - name: GENERIC_TIMEZONE
          valueFrom:
            secretKeyRef:
              name: secrets-app
              key: GENERIC_TIMEZONE
    - name: postgres-db
      image: postgres
      ports:
        - containerPort: 5432
          protocol: TCP
      env:
        - name: POSTGRES_PASSWORD
          valueFrom:
            secretKeyRef:
              name: secrets-app
              key: POSTGRES_PASSWORD